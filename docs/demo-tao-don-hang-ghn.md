# Demo Táº¡o ÄÆ¡n HÃ ng GHN Cho Admin

## TÃ¬nh Huá»‘ng Hiá»‡n Táº¡i
Há»‡ thá»‘ng hiá»‡n táº¡i **chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o cÃ³ mÃ£ GHN**, Ä‘Ã³ lÃ  lÃ½ do admin khÃ´ng tháº¥y thÃ´ng tin GHN trong trang chi tiáº¿t Ä‘Æ¡n hÃ ng.

## CÃ¡ch Táº¡o ÄÆ¡n HÃ ng Äá»ƒ Test GHN

### PhÆ°Æ¡ng Ãn 1: Táº¡o ÄÆ¡n HÃ ng Má»›i Tá»« Frontend

#### BÆ°á»›c 1: Truy Cáº­p Trang Äáº·t HÃ ng
1. Má»Ÿ trÃ¬nh duyá»‡t vÃ  vÃ o: `http://localhost:8000`
2. ÄÄƒng nháº­p tÃ i khoáº£n khÃ¡ch hÃ ng
3. ThÃªm sÃ¡ch vÃ o giá» hÃ ng
4. VÃ o trang checkout: `http://localhost:8000/orders/checkout`

#### BÆ°á»›c 2: Äiá»n ThÃ´ng Tin Giao HÃ ng
1. **Chá»n phÆ°Æ¡ng thá»©c**: "Giao hÃ ng táº­n nÆ¡i"
2. **Äá»‹a chá»‰ giao hÃ ng**: Chá»n hoáº·c thÃªm Ä‘á»‹a chá»‰ má»›i
   - Tá»‰nh/ThÃ nh phá»‘: Há»“ ChÃ­ Minh
   - Quáº­n/Huyá»‡n: Quáº­n 1
   - PhÆ°á»ng/XÃ£: PhÆ°á»ng Báº¿n NghÃ©
   - Äá»‹a chá»‰ chi tiáº¿t: 123 Nguyá»…n Huá»‡
3. **PhÆ°Æ¡ng thá»©c váº­n chuyá»ƒn**: Chá»n "Giao hÃ ng tiáº¿t kiá»‡m"
4. **Thanh toÃ¡n**: Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n

#### BÆ°á»›c 3: HoÃ n Táº¥t Äáº·t HÃ ng
1. Click "Äáº·t hÃ ng"
2. HoÃ n táº¥t thanh toÃ¡n (náº¿u cáº§n)
3. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng táº¡o Ä‘Æ¡n GHN (náº¿u cáº¥u hÃ¬nh Ä‘Ãºng)

### PhÆ°Æ¡ng Ãn 2: Táº¡o ÄÆ¡n GHN Thá»§ CÃ´ng Tá»« Admin

#### BÆ°á»›c 1: TÃ¬m ÄÆ¡n HÃ ng PhÃ¹ Há»£p
1. VÃ o admin panel: `http://localhost:8000/admin`
2. VÃ o **Quáº£n lÃ½ Ä‘Æ¡n hÃ ng**
3. TÃ¬m Ä‘Æ¡n hÃ ng cÃ³:
   - PhÆ°Æ¡ng thá»©c: "Giao hÃ ng táº­n nÆ¡i"
   - Tráº¡ng thÃ¡i: "Chá» XÃ¡c Nháº­n" hoáº·c "ÄÃ£ XÃ¡c Nháº­n"
   - Äá»‹a chá»‰ Ä‘áº§y Ä‘á»§

#### BÆ°á»›c 2: Táº¡o ÄÆ¡n GHN
1. Click vÃ o Ä‘Æ¡n hÃ ng Ä‘á»ƒ xem chi tiáº¿t
2. TÃ¬m pháº§n **"ThÃ´ng tin váº­n chuyá»ƒn GHN"** bÃªn pháº£i
3. Click nÃºt **"Táº¡o Ä‘Æ¡n hÃ ng GHN"**
4. Chá» há»‡ thá»‘ng xá»­ lÃ½ vÃ  hiá»ƒn thá»‹ káº¿t quáº£

## Káº¿t Quáº£ Mong Äá»£i

### Khi Táº¡o ThÃ nh CÃ´ng
```
âœ… Táº¡o Ä‘Æ¡n hÃ ng GHN thÃ nh cÃ´ng. MÃ£ váº­n Ä‘Æ¡n: L338UP

â”Œâ”€ ThÃ´ng tin váº­n chuyá»ƒn GHN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ÄÃ£ táº¡o váº­n Ä‘Æ¡n                      â”‚
â”‚                                        â”‚
â”‚ ğŸšš MÃ£ váº­n Ä‘Æ¡n GHN: L338UP             â”‚
â”‚ âš™ï¸  Loáº¡i dá»‹ch vá»¥: ID 2                â”‚
â”‚ ğŸ“… NgÃ y giao dá»± kiáº¿n: 28/01/2025      â”‚
â”‚                                        â”‚
â”‚ ğŸ“Š Tráº¡ng thÃ¡i váº­n chuyá»ƒn              â”‚
â”‚ â— Chá» láº¥y hÃ ng                        â”‚
â”‚                                        â”‚
â”‚ [ğŸ”„ Cáº­p nháº­t theo dÃµi] [âŒ Há»§y GHN]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Khi Táº¡o Tháº¥t Báº¡i
```
âŒ KhÃ´ng thá»ƒ táº¡o Ä‘Æ¡n hÃ ng GHN. Vui lÃ²ng kiá»ƒm tra thÃ´ng tin Ä‘á»‹a chá»‰ vÃ  thá»­ láº¡i.
```

## Kiá»ƒm Tra Cáº¥u HÃ¬nh GHN

### 1. Kiá»ƒm Tra File .env
```env
# GHN Configuration
GHN_API_URL=https://dev-online-gateway.ghn.vn
GHN_API_KEY=your_ghn_token_here
GHN_SHOP_ID=your_shop_id_here
GHN_SHOP_DISTRICT_ID=1442
GHN_SHOP_WARD_CODE=21211
```

### 2. Kiá»ƒm Tra Routes
Äáº£m báº£o cÃ¡c routes sau Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a:
```php
// Admin GHN routes
Route::post('/{id}/ghn/create', [OrderController::class, 'createGhnOrder'])->name('ghn.create');
Route::post('/{id}/ghn/update-tracking', [OrderController::class, 'updateGhnTracking'])->name('ghn.update-tracking');
Route::post('/{id}/ghn/cancel', [OrderController::class, 'cancelGhnOrder'])->name('ghn.cancel');
```

### 3. Kiá»ƒm Tra Database
Äáº£m báº£o báº£ng `orders` cÃ³ cÃ¡c trÆ°á»ng:
- `ghn_order_code`
- `ghn_service_type_id`
- `expected_delivery_date`
- `ghn_tracking_data`

## Troubleshooting

### Lá»—i "Chá»‰ cÃ³ thá»ƒ táº¡o Ä‘Æ¡n GHN cho Ä‘Æ¡n hÃ ng giao hÃ ng táº­n nÆ¡i"
**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra `delivery_method` cá»§a Ä‘Æ¡n hÃ ng
2. Äáº£m báº£o = 'delivery'

### Lá»—i "Chá»‰ cÃ³ thá»ƒ táº¡o Ä‘Æ¡n GHN khi Ä‘Æ¡n hÃ ng á»Ÿ tráº¡ng thÃ¡i..."
**Giáº£i phÃ¡p:**
1. Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng thÃ nh "ÄÃ£ XÃ¡c Nháº­n"
2. Hoáº·c "Chá» XÃ¡c Nháº­n"

### Lá»—i "KhÃ´ng thá»ƒ táº¡o Ä‘Æ¡n hÃ ng GHN"
**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra thÃ´ng tin Ä‘á»‹a chá»‰ cÃ³ Ä‘áº§y Ä‘á»§ `district_id` vÃ  `ward_code`
2. Kiá»ƒm tra cáº¥u hÃ¬nh GHN trong file .env
3. Kiá»ƒm tra log Laravel: `storage/logs/laravel.log`

### KhÃ´ng Tháº¥y NÃºt "Táº¡o ÄÆ¡n HÃ ng GHN"
**NguyÃªn nhÃ¢n:**
- ÄÆ¡n hÃ ng khÃ´ng pháº£i giao hÃ ng táº­n nÆ¡i
- ÄÃ£ cÃ³ mÃ£ GHN rá»“i
- Tráº¡ng thÃ¡i khÃ´ng phÃ¹ há»£p

**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra phÆ°Æ¡ng thá»©c giao hÃ ng
2. Kiá»ƒm tra tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng
3. Refresh trang

## Sau Khi CÃ³ ÄÆ¡n GHN Äáº§u TiÃªn

### Chá»©c NÄƒng CÃ³ Thá»ƒ Sá»­ Dá»¥ng
1. **Cáº­p nháº­t theo dÃµi**: Láº¥y thÃ´ng tin má»›i tá»« GHN
2. **Xem lá»‹ch sá»­ váº­n chuyá»ƒn**: Timeline di chuyá»ƒn hÃ ng hÃ³a
3. **Há»§y liÃªn káº¿t**: XÃ³a thÃ´ng tin GHN khá»i Ä‘Æ¡n hÃ ng

### ThÃ´ng Tin Hiá»ƒn Thá»‹
- MÃ£ váº­n Ä‘Æ¡n GHN
- Loáº¡i dá»‹ch vá»¥ (1: nhanh, 2: tiÃªu chuáº©n)
- NgÃ y giao dá»± kiáº¿n
- Tráº¡ng thÃ¡i hiá»‡n táº¡i
- MÃ´ táº£ chi tiáº¿t

## LiÃªn Há»‡ Há»— Trá»£

Náº¿u gáº·p váº¥n Ä‘á» khi táº¡o Ä‘Æ¡n GHN:
1. Chá»¥p áº£nh mÃ n hÃ¬nh lá»—i
2. Kiá»ƒm tra log Laravel
3. LiÃªn há»‡ bá»™ pháº­n IT vá»›i thÃ´ng tin:
   - ID Ä‘Æ¡n hÃ ng
   - ThÃ´ng bÃ¡o lá»—i
   - Thá»i gian xáº£y ra

---

**LÆ°u Ã½**: Sau khi táº¡o thÃ nh cÃ´ng Ä‘Æ¡n GHN Ä‘áº§u tiÃªn, admin sáº½ tháº¥y Ä‘áº§y Ä‘á»§ thÃ´ng tin vÃ  cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c chá»©c nÄƒng quáº£n lÃ½ GHN nhÆ° mÃ´ táº£ trong tÃ i liá»‡u.